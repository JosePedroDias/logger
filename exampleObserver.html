<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>logger - observer</title>
  <script src="http://127.0.0.1:3000/client.js"></script>
</head>

<body>
  <code><pre id="p">_</pre></code>

  <script>
    const L = logger('http://127.0.0.1:3000');

    const pEl = document.querySelector('#p');

    function onData(data) {
      console.log(data);
      pEl.firstChild.nodeValue = JSON.stringify(data, null, 2);
    }

    function onError() {
      window.alert('error occurred');
    }

    const key = location.hash && location.hash.substring(1);
    L.onChange(onData, onError, key);
  </script>

</body>

</html>